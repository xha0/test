<mxfile type="github" version="13.9.9" host="app.diagrams.net" modified="2020-11-18T01:50:09.127Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36 Edge/18.18362" etag="wvPd-y5HnOwBDfJc-ubs">
  <diagram id="ohuZpZp04dHcLVHIaXz8" name="Page-1">
    <mxGraphModel grid="0" dx="1483" dy="823" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="6d9VZupNLLY6rlw0ip5k-10" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="6d9VZupNLLY6rlw0ip5k-1" target="6d9VZupNLLY6rlw0ip5k-2">
          <mxGeometry as="geometry" relative="1" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-1" value="开始" parent="1" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="255" y="106" width="60" height="30" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-11" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="6d9VZupNLLY6rlw0ip5k-2" target="6d9VZupNLLY6rlw0ip5k-9">
          <mxGeometry as="geometry" relative="1" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-23" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" source="6d9VZupNLLY6rlw0ip5k-2" target="6d9VZupNLLY6rlw0ip5k-22">
          <mxGeometry as="geometry" relative="1" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-2" value="main" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="250" y="166" width="70" height="30" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-32" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="6d9VZupNLLY6rlw0ip5k-4" target="6d9VZupNLLY6rlw0ip5k-25">
          <mxGeometry as="geometry" relative="1" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-4" value="Task1&lt;br&gt;开始运行&lt;br&gt;输出字符串&lt;br&gt;之后也延时100ms" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="225" y="640" width="120" height="60" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-18" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="6d9VZupNLLY6rlw0ip5k-5" target="6d9VZupNLLY6rlw0ip5k-4">
          <mxGeometry as="geometry" relative="1" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-5" value="Task0&lt;br&gt;开始运行&lt;br&gt;输出字符串&lt;br&gt;之后延时200ms" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="225" y="560" width="120" height="60" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-15" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="6d9VZupNLLY6rlw0ip5k-6" target="6d9VZupNLLY6rlw0ip5k-5">
          <mxGeometry as="geometry" relative="1" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-6" value="OSStart()&lt;br&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;text-align: center ; color: rgb(0 , 0 , 0) ; text-transform: none ; text-indent: 0px ; letter-spacing: normal ; font-size: 13px ; font-style: normal ; font-variant: normal ; font-weight: 400 ; text-decoration: none ; word-spacing: 0px&quot;&gt;uC/OS-Ⅱ开始运行&lt;/span&gt;" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="225" y="480" width="120" height="60" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-14" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="6d9VZupNLLY6rlw0ip5k-7" target="6d9VZupNLLY6rlw0ip5k-6">
          <mxGeometry as="geometry" relative="1" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-7" value="&lt;span lang=&quot;EN-US&quot; style=&quot;font-size: 10.0pt ; font-family: &amp;#34;times new roman&amp;#34; , serif&quot;&gt;OSTaskCreate()&lt;br&gt;创建了三个任务&lt;br&gt;Task0(prio)=5&lt;br&gt;Task1(prio)=6&lt;br&gt;Task2(prio)=7&lt;br&gt;&lt;/span&gt;" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="221" y="371" width="129" height="89" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-13" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="6d9VZupNLLY6rlw0ip5k-8" target="6d9VZupNLLY6rlw0ip5k-7">
          <mxGeometry as="geometry" relative="1" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-8" value="&lt;span lang=&quot;EN-US&quot; style=&quot;font-family: &amp;#34;times new roman&amp;#34; , serif ; font-size: 13px&quot;&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;&lt;font style=&quot;font-size: 13px&quot;&gt;OSInit()&lt;br&gt;对&lt;span lang=&quot;EN-US&quot; style=&quot;text-align: center ; color: rgb(0 , 0 , 0) ; text-transform: none ; text-indent: 0px ; letter-spacing: normal ; font-style: normal ; font-variant: normal ; font-weight: 400 ; text-decoration: none ; word-spacing: 0px&quot;&gt;uC/OS-II进行初始化&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/span&gt;" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="215" y="296" width="140" height="50" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-12" parent="1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="6d9VZupNLLY6rlw0ip5k-9" target="6d9VZupNLLY6rlw0ip5k-8">
          <mxGeometry as="geometry" relative="1" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-9" value="&lt;span lang=&quot;EN-US&quot; style=&quot;font-family: &amp;#34;times new roman&amp;#34; , serif ; font-size: 13.33px&quot;&gt;&lt;font style=&quot;font-size: 13.33px&quot;&gt;&lt;font style=&quot;font-size: 13.33px&quot;&gt;&lt;font style=&quot;font-size: 13.33px&quot;&gt;&lt;font style=&quot;font-size: 13.33px&quot;&gt;&lt;font style=&quot;font-size: 13.33px&quot;&gt;UCOS_CPU_INIT()&lt;br&gt;安装&lt;span lang=&quot;EN-US&quot; style=&quot;font-family: &amp;#34;times new roman&amp;#34; , serif&quot;&gt;uC/OS-II的运行环境&lt;/span&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;b&gt;&lt;i&gt;&lt;u&gt;&lt;sub&gt;&lt;sup style=&quot;font-size: 13.33px&quot;&gt;&lt;strike&gt;&lt;br&gt;&lt;/strike&gt;&lt;/sup&gt;&lt;/sub&gt;&lt;/u&gt;&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="210" y="216" width="150" height="60" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-17" value="Task0优先级高抢占CPU时间片执行" parent="1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1">
          <mxGeometry as="geometry" x="290" y="540" width="200" height="20" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-19" value="Task0挂起后，Task1优先级最高了&lt;br&gt;就去抢占时间片执行" parent="1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1">
          <mxGeometry as="geometry" x="315" y="620" width="200" height="30" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-22" value="一个信号量&lt;br&gt;mutex" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="398" y="159.5" width="106" height="43" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-24" value="创建" parent="1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1">
          <mxGeometry as="geometry" x="342" y="159.5" width="34" height="18" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-25" value="Task2&lt;br&gt;开始运行&lt;br&gt;输出字符串&lt;br&gt;占用mutex&lt;br&gt;之后延时200ms" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="223.25" y="720" width="124.5" height="78" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-26" value="Task0，Task1挂起后，Task2优先级最高了&lt;br&gt;就去抢占时间片执行" parent="1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1">
          <mxGeometry as="geometry" x="295" y="700" width="240" height="30" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-27" value="Task1延时完&lt;br&gt;输出字符串&lt;br&gt;继续延时100ms" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="565" y="360" width="120" height="60" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-28" value="Task0延时完&lt;br&gt;准备占用mutex&lt;br&gt;但是已被Task2占用&lt;br&gt;无法获得，进入阻塞" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="565" y="440" width="120" height="60" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-29" value="Task2&lt;br&gt;运行完成&lt;br&gt;释放mutex" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="575" y="590" width="100" height="50" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-30" value="Task0&lt;br&gt;占用mutex继续运行&lt;br&gt;运行完成&lt;br&gt;释放mutex" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="550" y="660" width="150" height="80" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-31" value="Task1延时完&lt;br&gt;继续运行&lt;br&gt;运行完成" parent="1" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1">
          <mxGeometry as="geometry" x="575" y="520" width="100" height="50" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-34" value="" parent="1" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="6d9VZupNLLY6rlw0ip5k-25" target="6d9VZupNLLY6rlw0ip5k-27">
          <mxGeometry as="geometry" width="50" height="50" relative="1">
            <mxPoint as="sourcePoint" x="460" y="810" />
            <mxPoint as="targetPoint" x="510" y="760" />
            <Array as="points">
              <mxPoint x="285" y="820" />
              <mxPoint x="540" y="820" />
              <mxPoint x="540" y="330" />
              <mxPoint x="625" y="330" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-35" value="" parent="1" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" source="6d9VZupNLLY6rlw0ip5k-27" target="6d9VZupNLLY6rlw0ip5k-28">
          <mxGeometry as="geometry" width="50" height="50" relative="1">
            <mxPoint as="sourcePoint" x="770" y="490" />
            <mxPoint as="targetPoint" x="820" y="440" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-38" value="" parent="1" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1">
          <mxGeometry as="geometry" width="50" height="50" relative="1">
            <mxPoint as="sourcePoint" x="624.41" y="500" />
            <mxPoint as="targetPoint" x="624.41" y="520" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-39" value="" parent="1" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1">
          <mxGeometry as="geometry" width="50" height="50" relative="1">
            <mxPoint as="sourcePoint" x="624.41" y="570" />
            <mxPoint as="targetPoint" x="624.41" y="590" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-40" value="" parent="1" style="endArrow=classic;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1">
          <mxGeometry as="geometry" width="50" height="50" relative="1">
            <mxPoint as="sourcePoint" x="624.41" y="640" />
            <mxPoint as="targetPoint" x="624.41" y="660" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-42" value="这里属于一个流程&lt;br&gt;由于Task1第一次循环做完&lt;br&gt;又马上进行了第二次循环&lt;br&gt;之后就要看延时的时间&lt;br&gt;Task0和Task2谁占用mutex" parent="1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1">
          <mxGeometry as="geometry" x="537" y="187" width="153" height="74" />
        </mxCell>
        <mxCell id="6d9VZupNLLY6rlw0ip5k-43" value="此时发生了优先级反转问题&lt;br&gt;Task0优先级比Task2高&lt;br&gt;但是还是要等Task2执行完才能执行" parent="1" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1">
          <mxGeometry as="geometry" x="690" y="460" width="197" height="46" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
